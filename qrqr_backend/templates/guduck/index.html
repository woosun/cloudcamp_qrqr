<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>나의 드래곤볼</title>
    {% include "base.html" %}
</head>
<body>
    {% include "top.html" %}
{% load static %}
{% block content %}
    {% if lists %}
          <div>
              <table  class="table">
                  <thead>
                  <tr>
                      <th scope="col">순번</th>
                      <th scope="col">카테고리</th>
                      <th scope="col">상품명</th>
                      <th scope="col">이미지</th>
                      <th scope="col">구독일자</th>
                      <th scope="col">해지하기</th>
                   </tr>
                  </thead>
        {% for list in lists %}
                  <tr>
                      <td>{{ list.id }}</td>
                      <td>{{ list.pid.category }}</td>
                      <td>{{ list.pid.name }}</td>
                      <td>
                          {% if list.pid.imgsrc %}
                            <img src="{% get_media_prefix %}{{ list.pid.imgsrc }}" class="img-fluid"/>
                          {% else %}
                            <img src="{% get_media_prefix %}/noimage.png" class="img-fluid"/>
                          {% endif %}
                      </td>
                       <td>{{ list.create_date }}</td>
                      <td>
                          <a class="post-meta" href="/unlike/{{ list.pid.id }}?page={{ lists.in_page }}">
                              <spen id="like_count">해지하기</spen>
                          </a>
                      </td>
                  </tr>
        {% endfor %}
            </table>
    <!-- 페이징처리 시작 -->
    <div id="paging">
        <ul class="pagination justify-content-center" style="margin-top: 2rem;">
            <!-- 이전페이지 -->
            {% if lists.has_previous %}
            <li class="page-item">
                <a class="page-link" href="/myguduck/?page={{ lists.previous_page_number }}">이전</a>
                <!-- href로 뎁스 설정 -->
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link" tabindex="-1" aria-disabled="true" href="#">이전</a>
            </li>
            {% endif %}
            <!-- 페이지리스트 -->
            {% for page_number in lists.paginator.page_range %}
            {% if page_number == lists.number %}
            <li class="page-item active" aria-current="page">
                <a class="page-link" href="/myguduck/?page={{ page_number }}">{{ page_number }}</a>
            </li>
            {% else %}
            <li class="page-item">
                <a class="page-link" href="/myguduck/?page={{ page_number }}">{{ page_number }}</a>
            </li>
            {% endif %}
            {% endfor %}
            <!-- 다음페이지 -->
            {% if lists.has_next %}
            <li class="page-item">
                <a class="page-link" href="/myguduck/?page={{ lists.next_page_number }}">다음</a>
            </li>
            {% else %}
            <li class="page-item disabled">
                <a class="page-link" tabindex="-1" aria-disabled="true" href="#">다음</a>
            </li>
            {% endif %}
        </ul>
    </div>
    <!-- 페이징처리 끝 -->
          </div>
    {% else %}
    <h1 class="display-6"> 구독내역이 없습니다. </h1>
    {% endif %}

</body>
</html>
{% endblock %}
{% include "footer.html" %}